{"ast":null,"code":"import _regeneratorRuntime from\"D:/js/socialsite/SOCIALBOOK/connect/react-social/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/js/socialsite/SOCIALBOOK/connect/react-social/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/js/socialsite/SOCIALBOOK/connect/react-social/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./share.css\";import PermMedia from'@mui/icons-material/PermMedia';import Label from'@mui/icons-material/Label';import Room from'@mui/icons-material/Room';import EmojiEmotions from'@mui/icons-material/EmojiEmotions';import{useContext,useRef,useState}from\"react\";import{AuthContext}from\"../../context/AuthContext\";import axios from\"axios\";import{ChildModal}from\"../modal/modalcomponent\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Share(){var _useContext=useContext(AuthContext),user=_useContext.user;var PF=process.env.REACT_APP_PUBLIC_FOLDER;var desc=useRef();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var newPost,data,fileName;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();newPost={userId:user._id,desc:desc.current.value+\"\"};if(!file){_context.next=16;break;}data=new FormData();fileName=Date.now()+file.name;data.append(\"name\",fileName);data.append(\"file\",file);newPost.img=fileName;console.log(newPost);_context.prev=9;_context.next=12;return axios.post(\"/upload\",data);case 12:_context.next=16;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](9);case 16:_context.prev=16;_context.next=19;return axios.post(\"/posts\",newPost);case 19:window.location.reload();_context.next=24;break;case 22:_context.prev=22;_context.t1=_context[\"catch\"](16);case 24:case\"end\":return _context.stop();}}},_callee,null,[[9,14],[16,22]]);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"share\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"shareWrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"shareTop\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"shareProfileImg\",src:user.profilePicture?PF+user.profilePicture:PF+\"search.png\",alt:\"\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"What's in your mind \"+user.username+\"?\",className:\"shareInput\",ref:desc})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"shareHr\"}),file&&/*#__PURE__*/_jsx(ChildModal,{file:file,setFile:setFile}),/*#__PURE__*/_jsxs(\"form\",{className:\"shareBottom\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"shareOptions\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"file\",className:\"shareOption\",children:[/*#__PURE__*/_jsx(PermMedia,{htmlColor:\"tomato\",className:\"shareIcon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"shareOptionText\",children:\"Photo or Video\"}),/*#__PURE__*/_jsx(\"input\",{style:{display:\"none\"},type:\"file\",id:\"file\",accept:\".png,.jpeg,.jpg\",onChange:function onChange(e){return setFile(e.target.files[0]);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"shareOption\",children:[/*#__PURE__*/_jsx(Label,{htmlColor:\"blue\",className:\"shareIcon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"shareOptionText\",children:\"Tag\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"shareOption\",children:[/*#__PURE__*/_jsx(Room,{htmlColor:\"green\",className:\"shareIcon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"shareOptionText\",children:\"Location\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"shareOption\",children:[/*#__PURE__*/_jsx(EmojiEmotions,{htmlColor:\"goldenrod\",className:\"shareIcon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"shareOptionText\",children:\"Feelings\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"shareButton\",type:\"submit\",children:\"Share\"})]})]})});}","map":{"version":3,"sources":["D:/js/socialsite/SOCIALBOOK/connect/react-social/src/components/share/Share.jsx"],"names":["PermMedia","Label","Room","EmojiEmotions","useContext","useRef","useState","AuthContext","axios","ChildModal","Share","user","PF","process","env","REACT_APP_PUBLIC_FOLDER","desc","file","setFile","submitHandler","e","preventDefault","newPost","userId","_id","current","value","data","FormData","fileName","Date","now","name","append","img","console","log","post","window","location","reload","profilePicture","username","display","target","files"],"mappings":"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","sourcesContent":["import \"./share.css\";\r\nimport PermMedia from '@mui/icons-material/PermMedia';\r\nimport Label from '@mui/icons-material/Label';\r\nimport Room from '@mui/icons-material/Room'\r\nimport EmojiEmotions from '@mui/icons-material/EmojiEmotions'\r\n\r\nimport { useContext, useRef, useState } from \"react\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport axios from \"axios\";\r\nimport { ChildModal } from \"../modal/modalcomponent\";\r\n\r\nexport default function Share() {\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n  const desc = useRef();\r\n\r\n  const [file, setFile] = useState(null);\r\n\r\n  const submitHandler = async (e) => {\r\n    e.preventDefault();\r\n    const newPost = {\r\n      userId: user._id,\r\n      desc: desc.current.value + \"\",\r\n\r\n\r\n    };\r\n    if (file) {\r\n      const data = new FormData();\r\n      const fileName = Date.now() + file.name;\r\n      data.append(\"name\", fileName);\r\n      data.append(\"file\", file);\r\n      newPost.img = fileName;\r\n      console.log(newPost);\r\n      try {\r\n        await axios.post(\"/upload\", data);\r\n      } catch (err) { }\r\n    }\r\n    try {\r\n      await axios.post(\"/posts\", newPost);\r\n      window.location.reload();\r\n    } catch (err) { }\r\n  };\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"share\">\r\n      <div className=\"shareWrapper\">\r\n        <div className=\"shareTop\">\r\n          <img\r\n            className=\"shareProfileImg\"\r\n            src={\r\n              user.profilePicture\r\n                ? PF + user.profilePicture\r\n                : PF + \"search.png\"\r\n            }\r\n            alt=\"\"\r\n          />\r\n          <input\r\n            placeholder={\"What's in your mind \" + user.username + \"?\"}\r\n            className=\"shareInput\"\r\n            ref={desc}\r\n          />\r\n        </div>\r\n        <hr className=\"shareHr\" />\r\n        {file && (\r\n          <ChildModal file={file} setFile={setFile} />\r\n        )}\r\n        <form className=\"shareBottom\" onSubmit={submitHandler}>\r\n          <div className=\"shareOptions\">\r\n            <label htmlFor=\"file\" className=\"shareOption\">\r\n              <PermMedia htmlColor=\"tomato\" className=\"shareIcon\" />\r\n              <span className=\"shareOptionText\">Photo or Video</span>\r\n              <input\r\n                style={{ display: \"none\" }}\r\n                type=\"file\"\r\n                id=\"file\"\r\n                accept=\".png,.jpeg,.jpg\"\r\n                onChange={(e) => setFile(e.target.files[0])}\r\n              />\r\n            </label>\r\n            <div className=\"shareOption\">\r\n              <Label htmlColor=\"blue\" className=\"shareIcon\" />\r\n              <span className=\"shareOptionText\">Tag</span>\r\n            </div>\r\n            <div className=\"shareOption\">\r\n              <Room htmlColor=\"green\" className=\"shareIcon\" />\r\n              <span className=\"shareOptionText\">Location</span>\r\n            </div>\r\n            <div className=\"shareOption\">\r\n              <EmojiEmotions htmlColor=\"goldenrod\" className=\"shareIcon\" />\r\n              <span className=\"shareOptionText\">Feelings</span>\r\n            </div>\r\n          </div>\r\n          <button className=\"shareButton\" type=\"submit\">\r\n            Share\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}"]},"metadata":{},"sourceType":"module"}