{"ast":null,"code":"import _toConsumableArray from\"D:/js/socialsite/SOCIALBOOK/connect/react-social/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"D:/js/socialsite/SOCIALBOOK/connect/react-social/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./topbar.css\";import Person from\"@mui/icons-material/Person\";import Chat from\"@mui/icons-material/Chat\";import Notification from\"@mui/icons-material/Notifications\";import Power from\"@mui/icons-material/PowerSettingsNewOutlined\";import SearchIcon from\"@mui/icons-material/Search\";import{useContext,useEffect,useState}from\"react\";import{AuthContext}from\"../../context/AuthContext\";import React from\"react\";import{Link,useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Topbar(_ref){var text=_ref.text,setText=_ref.setText,socket=_ref.socket;var _useContext=useContext(AuthContext),user=_useContext.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),notifications=_useState2[0],setNotifications=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),opennot=_useState4[0],setOpennot=_useState4[1];var history=useHistory();useEffect(function(){var _socket$current;socket===null||socket===void 0?void 0:(_socket$current=socket.current)===null||_socket$current===void 0?void 0:_socket$current.on(\"getNotification\",function(data){setNotifications(function(prev){return[].concat(_toConsumableArray(prev),[data]);});});},[socket]);var displayNotification=function displayNotification(_ref2){var senderName=_ref2.senderName,type=_ref2.type,message=_ref2.message;var action;if(type==1){action=\"liked\";}else if(type==2){action=\"loved\";}else{action=\"commented \\\"\".concat(message,\" on\\\"\");}return/*#__PURE__*/_jsx(\"span\",{className:\"notification\",children:\"\".concat(senderName,\" \").concat(action,\" your post.\")});};var handleRead=function handleRead(){setNotifications([]);setOpennot(false);};var registerSubmit=function registerSubmit(e){e.preventDefault();localStorage.clear();history.push(\"/login\");window.location.reload();};return/*#__PURE__*/_jsxs(\"div\",{className:\"topbar-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"topbarLeft\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",style:{textDecoration:\"none\"},children:/*#__PURE__*/_jsx(\"span\",{className:\"logo\",children:\"SocialBook\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"topbarCenter\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"searchbar\",children:[/*#__PURE__*/_jsx(SearchIcon,{className:\"searchIcon\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"search for posts\",value:text,className:\"searchInput\",onChange:function onChange(e){return setText(e.target.value);}})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"topbarRight\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"topbarLinks\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",style:{linkStyle:\"none\",textDecoration:\"none\",color:\"white\"},children:/*#__PURE__*/_jsx(\"span\",{className:\"topbarLink\",children:\"Home\"})}),/*#__PURE__*/_jsx(Link,{to:\"/searchUser\",style:{linkStyle:\"none\",textDecoration:\"none\",color:\"white\"},children:/*#__PURE__*/_jsx(\"span\",{className:\"topbarLink\",children:\"TimeLine\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"topbarIcons\",children:/*#__PURE__*/_jsx(\"div\",{className:\"topbarIconItem\",children:/*#__PURE__*/_jsx(Link,{to:\"/searchUser\",children:/*#__PURE__*/_jsx(Person,{})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"topbarIcons\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"topbarIconItem\",children:[/*#__PURE__*/_jsx(Link,{style:{linkStyle:\"none\",textDecoration:\"none\",color:\"white\"},to:\"/messenger/\".concat(user._id),children:/*#__PURE__*/_jsx(Chat,{className:\"chatIcon\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"topbarIconBadge\",children:\"1\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"topbarIcons\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"topbarIconItem\",children:[/*#__PURE__*/_jsx(Notification,{onClick:function onClick(){return setOpennot(true);}}),notifications.length>0&&/*#__PURE__*/_jsx(\"span\",{className:\"topbarIconBadge\",children:notifications.length}),opennot&&/*#__PURE__*/_jsxs(\"div\",{className:\"notifications\",children:[notifications.map(function(n){return displayNotification(n);}),/*#__PURE__*/_jsx(\"button\",{className:\"nButton\",onClick:handleRead(),children:\"Mark as read\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"topbarIcons\",children:/*#__PURE__*/_jsx(\"div\",{className:\"topbarIconItem\",children:/*#__PURE__*/_jsx(Power,{onClick:registerSubmit})})}),/*#__PURE__*/_jsx(Link,{to:\"/profile/\".concat(user._id),children:/*#__PURE__*/_jsx(\"img\",{src:user.profilePicture?user.profilePicture:\"https://i.pinimg.com/736x/d9/56/9b/d9569bbed4393e2ceb1af7ba64fdf86a.jpg\",alt:\"\",className:\"topbarImg\"})})]})]});}","map":{"version":3,"names":["Person","Chat","Notification","Power","SearchIcon","useContext","useEffect","useState","AuthContext","React","Link","useHistory","Topbar","text","setText","socket","user","notifications","setNotifications","opennot","setOpennot","history","current","on","data","prev","displayNotification","senderName","type","message","action","handleRead","registerSubmit","e","preventDefault","localStorage","clear","push","window","location","reload","textDecoration","target","value","linkStyle","color","_id","length","map","n","profilePicture"],"sources":["D:/js/socialsite/SOCIALBOOK/connect/react-social/src/components/topbar/Topbar.jsx"],"sourcesContent":["import \"./topbar.css\";\r\nimport Person from \"@mui/icons-material/Person\";\r\nimport Chat from \"@mui/icons-material/Chat\";\r\nimport Notification from \"@mui/icons-material/Notifications\";\r\nimport Power from \"@mui/icons-material/PowerSettingsNewOutlined\";\r\nimport SearchIcon from \"@mui/icons-material/Search\";\r\n\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport React from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\n\r\n\r\nexport default function Topbar({ text, setText, socket }) {\r\n\r\n  const { user } = useContext(AuthContext);\r\n  const [notifications, setNotifications] = useState([]);\r\n  const [opennot, setOpennot] = useState(false);\r\n\r\n  const history = useHistory();\r\n\r\n\r\n  useEffect(() => {\r\n    socket?.current?.on(\"getNotification\", (data) => {\r\n      setNotifications((prev) => [...prev, data]);\r\n    });\r\n  }, [socket]);\r\n\r\n\r\n\r\n  const displayNotification = ({ senderName, type, message }) => {\r\n    let action;\r\n\r\n    if (type == 1) {\r\n      action = \"liked\";\r\n    } else if (type == 2) {\r\n      action = \"loved\";\r\n    } else {\r\n      action = `commented \"${message} on\"`;\r\n    }\r\n    return (\r\n      <span className=\"notification\">{`${senderName} ${action} your post.`}</span>\r\n    );\r\n  };\r\n\r\n  const handleRead = () => {\r\n    setNotifications([]);\r\n    setOpennot(false);\r\n\r\n  };\r\n\r\n  const registerSubmit = (e) => {\r\n    e.preventDefault();\r\n    localStorage.clear();\r\n    history.push(\"/login\")\r\n    window.location.reload();\r\n  };\r\n\r\n\r\n  return (\r\n    <div className=\"topbar-container\">\r\n      <div className=\"topbarLeft\">\r\n        <Link to=\"/\" style={{ textDecoration: \"none\" }}>\r\n          <span className=\"logo\">SocialBook</span>\r\n        </Link>\r\n      </div>\r\n      <div className=\"topbarCenter\">\r\n        <div className=\"searchbar\">\r\n          <SearchIcon className=\"searchIcon\" />\r\n          <input placeholder=\"search for posts\" value={text} className=\"searchInput\" onChange={(e) => setText(e.target.value)} />\r\n        </div>\r\n      </div>\r\n      <div className=\"topbarRight\">\r\n        <div className=\"topbarLinks\">\r\n          <Link to=\"/\" style={{ linkStyle: \"none\", textDecoration: \"none\", color: \"white\" }}>\r\n            <span className=\"topbarLink\">Home</span>\r\n          </Link>\r\n          <Link to=\"/searchUser\" style={{ linkStyle: \"none\", textDecoration: \"none\", color: \"white\" }}>\r\n            <span className=\"topbarLink\">TimeLine</span>\r\n          </Link>\r\n        </div>\r\n        <div className=\"topbarIcons\">\r\n          <div className=\"topbarIconItem\">\r\n            <Link to=\"/searchUser\"><Person /></Link>\r\n          </div>\r\n        </div>\r\n        <div className=\"topbarIcons\">\r\n          <div className=\"topbarIconItem\">\r\n            <Link style={{ linkStyle: \"none\", textDecoration: \"none\", color: \"white\" }} to={`/messenger/${user._id}`}>\r\n              <Chat className=\"chatIcon\" />\r\n            </Link>\r\n            <span className=\"topbarIconBadge\">1</span>\r\n          </div>\r\n        </div>\r\n        <div className=\"topbarIcons\">\r\n          <div className=\"topbarIconItem\">\r\n            <Notification onClick={() => setOpennot(true)} />\r\n            {notifications.length > 0 && (<span className=\"topbarIconBadge\">{notifications.length}</span>)}\r\n            {opennot && (\r\n              <div className=\"notifications\">\r\n                {notifications.map((n) => displayNotification(n))}\r\n                <button className=\"nButton\" onClick={handleRead()}>\r\n                  Mark as read\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n        </div>\r\n        <div className=\"topbarIcons\">\r\n          <div className=\"topbarIconItem\">\r\n            <Power onClick={registerSubmit} />\r\n          </div>\r\n        </div>\r\n        <Link to={`/profile/${user._id}`}>\r\n          <img\r\n            src={\r\n              user.profilePicture\r\n                ? user.profilePicture\r\n                : \"https://i.pinimg.com/736x/d9/56/9b/d9569bbed4393e2ceb1af7ba64fdf86a.jpg\"\r\n            }\r\n            alt=\"\"\r\n            className=\"topbarImg\"\r\n          />\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}