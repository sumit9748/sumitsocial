{"ast":null,"code":"import _toConsumableArray from\"D:/js/socialsite/SOCIALBOOK/connect/react-social/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"D:/js/socialsite/SOCIALBOOK/connect/react-social/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./topbar.css\";import Person from\"@mui/icons-material/Person\";import Chat from\"@mui/icons-material/Chat\";import Notification from\"@mui/icons-material/Notifications\";import Power from\"@mui/icons-material/PowerSettingsNewOutlined\";import SearchIcon from\"@mui/icons-material/Search\";import{useContext,useEffect,useState}from\"react\";import{AuthContext}from\"../../context/AuthContext\";import React from\"react\";import{Link,useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Topbar(_ref){var text=_ref.text,setText=_ref.setText,socket=_ref.socket;var _useContext=useContext(AuthContext),user=_useContext.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),notifications=_useState2[0],setNotifications=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),open=_useState4[0],setOpen=_useState4[1];var history=useHistory();useEffect(function(){var _socket$current;socket===null||socket===void 0?void 0:(_socket$current=socket.current)===null||_socket$current===void 0?void 0:_socket$current.on(\"getNotification\",function(data){setNotifications(function(prev){return[].concat(_toConsumableArray(prev),[data]);});});},[socket]);var displayNotification=function displayNotification(_ref2){var senderName=_ref2.senderName,type=_ref2.type;var action;if(type===1){action=\"liked\";}else if(type===2){action=\"loved\";}else{action=\"shared\";}return/*#__PURE__*/_jsx(\"span\",{className:\"notification\",children:\"\".concat(senderName,\" \").concat(action,\" your post.\")});};var handleRead=function handleRead(){setNotifications([]);setOpen(false);};var registerSubmit=function registerSubmit(e){e.preventDefault();localStorage.clear();history.push(\"/login\");window.location.reload();};var PF=process.env.REACT_APP_PUBLIC_FOLDER;return/*#__PURE__*/_jsxs(\"div\",{className:\"topbar-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"topbarLeft\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",style:{textDecoration:\"none\"},children:/*#__PURE__*/_jsx(\"span\",{className:\"logo\",children:\"SocialBook\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"topbarCenter\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"searchbar\",children:[/*#__PURE__*/_jsx(SearchIcon,{className:\"searchIcon\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"search for posts\",value:text,className:\"searchInput\",onChange:function onChange(e){return setText(e.target.value);}})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"topbarRight\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"topbarLinks\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",style:{linkStyle:\"none\",textDecoration:\"none\",color:\"white\"},children:/*#__PURE__*/_jsx(\"span\",{className:\"topbarLink\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"topbarLink\",children:\"TimeLine\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"topbarIcons\",children:/*#__PURE__*/_jsx(Link,{to:\"/searchUser\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"topbarIconItem\",children:[/*#__PURE__*/_jsx(Person,{}),/*#__PURE__*/_jsx(\"span\",{className:\"topbarIconBadge\",children:\"1\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"topbarIcons\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"topbarIconItem\",children:[/*#__PURE__*/_jsx(Link,{style:{linkStyle:\"none\",textDecoration:\"none\",color:\"white\"},to:\"/messenger/\".concat(user._id),children:/*#__PURE__*/_jsx(Chat,{className:\"chatIcon\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"topbarIconBadge\",children:\"1\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"topbarIcons\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"topbarIconItem\",children:[/*#__PURE__*/_jsx(Notification,{onClick:function onClick(){return setOpen(!open);}}),notifications.length>0&&/*#__PURE__*/_jsx(\"span\",{className:\"topbarIconBadge\",children:notifications.length}),open&&/*#__PURE__*/_jsxs(\"div\",{className:\"notifications\",children:[notifications.map(function(n){return displayNotification(n);}),/*#__PURE__*/_jsx(\"button\",{className:\"nButton\",onClick:handleRead,children:\"Mark as read\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"topbarIcons\",children:/*#__PURE__*/_jsx(\"div\",{className:\"topbarIconItem\",children:/*#__PURE__*/_jsx(Power,{onClick:registerSubmit})})}),/*#__PURE__*/_jsx(Link,{to:\"/profile/\".concat(user._id),children:/*#__PURE__*/_jsx(\"img\",{src:user.profilePicture?PF+user.profilePicture:PF+\"search.png\",alt:\"\",className:\"topbarImg\"})})]})]});}","map":{"version":3,"sources":["D:/js/socialsite/SOCIALBOOK/connect/react-social/src/components/topbar/Topbar.jsx"],"names":["Person","Chat","Notification","Power","SearchIcon","useContext","useEffect","useState","AuthContext","React","Link","useHistory","Topbar","text","setText","socket","user","notifications","setNotifications","open","setOpen","history","current","on","data","prev","displayNotification","senderName","type","action","handleRead","registerSubmit","e","preventDefault","localStorage","clear","push","window","location","reload","PF","process","env","REACT_APP_PUBLIC_FOLDER","textDecoration","target","value","linkStyle","color","_id","length","map","n","profilePicture"],"mappings":"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","sourcesContent":["import \"./topbar.css\";\r\nimport Person from \"@mui/icons-material/Person\";\r\nimport Chat from \"@mui/icons-material/Chat\";\r\nimport Notification from \"@mui/icons-material/Notifications\";\r\nimport Power from \"@mui/icons-material/PowerSettingsNewOutlined\";\r\nimport SearchIcon from \"@mui/icons-material/Search\";\r\n\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport React from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\n\r\n\r\nexport default function Topbar({ text, setText, socket }) {\r\n\r\n  const { user } = useContext(AuthContext);\r\n  const [notifications, setNotifications] = useState([]);\r\n  const [open, setOpen] = useState(false);\r\n  const history = useHistory();\r\n\r\n\r\n  useEffect(() => {\r\n    socket?.current?.on(\"getNotification\", (data) => {\r\n      setNotifications((prev) => [...prev, data]);\r\n    });\r\n  }, [socket]);\r\n\r\n\r\n  const displayNotification = ({ senderName, type }) => {\r\n    let action;\r\n\r\n    if (type === 1) {\r\n      action = \"liked\";\r\n    } else if (type === 2) {\r\n      action = \"loved\";\r\n    } else {\r\n      action = \"shared\";\r\n    }\r\n    return (\r\n      <span className=\"notification\">{`${senderName} ${action} your post.`}</span>\r\n    );\r\n  };\r\n\r\n  const handleRead = () => {\r\n    setNotifications([]);\r\n    setOpen(false);\r\n  };\r\n\r\n  const registerSubmit = (e) => {\r\n    e.preventDefault();\r\n    localStorage.clear();\r\n    history.push(\"/login\")\r\n    window.location.reload();\r\n  };\r\n\r\n\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n  return (\r\n    <div className=\"topbar-container\">\r\n      <div className=\"topbarLeft\">\r\n        <Link to=\"/\" style={{ textDecoration: \"none\" }}>\r\n          <span className=\"logo\">SocialBook</span>\r\n        </Link>\r\n      </div>\r\n      <div className=\"topbarCenter\">\r\n        <div className=\"searchbar\">\r\n          <SearchIcon className=\"searchIcon\" />\r\n          <input placeholder=\"search for posts\" value={text} className=\"searchInput\" onChange={(e) => setText(e.target.value)} />\r\n        </div>\r\n      </div>\r\n      <div className=\"topbarRight\">\r\n        <div className=\"topbarLinks\">\r\n          <Link to=\"/\" style={{ linkStyle: \"none\", textDecoration: \"none\", color: \"white\" }}>\r\n            <span className=\"topbarLink\">Home</span>\r\n          </Link>\r\n          <span className=\"topbarLink\">TimeLine</span>\r\n        </div>\r\n        <div className=\"topbarIcons\">\r\n          <Link to=\"/searchUser\"><div className=\"topbarIconItem\">\r\n            <Person />\r\n            <span className=\"topbarIconBadge\">1</span>\r\n          </div>\r\n          </Link>\r\n        </div>\r\n        <div className=\"topbarIcons\">\r\n          <div className=\"topbarIconItem\">\r\n            <Link style={{ linkStyle: \"none\", textDecoration: \"none\", color: \"white\" }} to={`/messenger/${user._id}`}>\r\n              <Chat className=\"chatIcon\" />\r\n            </Link>\r\n            <span className=\"topbarIconBadge\">1</span>\r\n          </div>\r\n        </div>\r\n        <div className=\"topbarIcons\">\r\n          <div className=\"topbarIconItem\">\r\n            <Notification onClick={() => setOpen(!open)} />\r\n            {notifications.length > 0 && (<span className=\"topbarIconBadge\">{notifications.length}</span>)}\r\n            {open && (\r\n              <div className=\"notifications\">\r\n                {notifications.map((n) => displayNotification(n))}\r\n                <button className=\"nButton\" onClick={handleRead}>\r\n                  Mark as read\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n        </div>\r\n        <div className=\"topbarIcons\">\r\n          <div className=\"topbarIconItem\">\r\n            <Power onClick={registerSubmit} />\r\n          </div>\r\n        </div>\r\n        <Link to={`/profile/${user._id}`}>\r\n          <img\r\n            src={\r\n              user.profilePicture\r\n                ? PF + user.profilePicture\r\n                : PF + \"search.png\"\r\n            }\r\n            alt=\"\"\r\n            className=\"topbarImg\"\r\n          />\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}