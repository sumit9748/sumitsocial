{"ast":null,"code":"var _jsxFileName = \"D:\\\\js\\\\socialsite\\\\SOCIALBOOK\\\\react-social\\\\src\\\\components\\\\chatOnline\\\\ChatOnline.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { axiosInstance } from \"../../config\";\nimport \"./chatOnline.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ChatOnline(_ref) {\n  _s();\n\n  let {\n    onlineUsers,\n    currentId,\n    setCurrentChat\n  } = _ref;\n  const [friends, setFriends] = useState([]);\n  const [onlineFriends, setOnlineFriends] = useState([]);\n  useEffect(() => {\n    const getFriends = async () => {\n      const res = await axiosInstance.get(\"/users/friends/\" + currentId);\n      setFriends(res.data);\n    };\n\n    getFriends();\n  }, [currentId]);\n  useEffect(() => {\n    setOnlineFriends(friends.filter(f => onlineUsers.includes(f._id)));\n  }, [friends, onlineUsers]);\n  console.log(onlineFriends);\n\n  const handleClick = async user => {\n    try {\n      const res = await axiosInstance.get(`/conversations/find/${currentId}/${user._id}`);\n      console.log(res.data);\n\n      if (res.data === null) {\n        await axiosInstance.post(\"/conversations/\", {\n          senderId: currentId,\n          receiverId: user._id\n        });\n        setCurrentChat(res.data);\n      } else {\n        setCurrentChat(res.data);\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chatOnline\",\n    children: onlineFriends.map(o => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chatOnlineFriend\",\n      onClick: () => handleClick(o),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chatOnlineImgContainer\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"chatOnlineImg\",\n          src: (o === null || o === void 0 ? void 0 : o.profilePicture) ? o.profilePicture : \"https://i.pinimg.com/736x/d9/56/9b/d9569bbed4393e2ceb1af7ba64fdf86a.jpg\",\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chatOnlineBadge\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"chatOnlineName\",\n        children: o === null || o === void 0 ? void 0 : o.username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ChatOnline, \"LhrCBG2JdpC4LXNRz/CbesZ6zYg=\");\n\n_c = ChatOnline;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatOnline\");","map":{"version":3,"names":["useEffect","useState","axiosInstance","ChatOnline","onlineUsers","currentId","setCurrentChat","friends","setFriends","onlineFriends","setOnlineFriends","getFriends","res","get","data","filter","f","includes","_id","console","log","handleClick","user","post","senderId","receiverId","err","map","o","profilePicture","username"],"sources":["D:/js/socialsite/SOCIALBOOK/react-social/src/components/chatOnline/ChatOnline.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { axiosInstance } from \"../../config\";\r\nimport \"./chatOnline.css\";\r\n\r\nexport default function ChatOnline({ onlineUsers, currentId, setCurrentChat }) {\r\n  const [friends, setFriends] = useState([]);\r\n  const [onlineFriends, setOnlineFriends] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const getFriends = async () => {\r\n      const res = await axiosInstance.get(\"/users/friends/\" + currentId);\r\n      setFriends(res.data);\r\n    };\r\n\r\n    getFriends();\r\n  }, [currentId]);\r\n\r\n  useEffect(() => {\r\n    setOnlineFriends(friends.filter((f) => onlineUsers.includes(f._id)));\r\n  }, [friends, onlineUsers]);\r\n\r\n  console.log(onlineFriends);\r\n\r\n  const handleClick = async (user) => {\r\n    try {\r\n      const res = await axiosInstance.get(\r\n        `/conversations/find/${currentId}/${user._id}`\r\n      );\r\n      console.log(res.data);\r\n      if (res.data === null) {\r\n        await axiosInstance.post(\"/conversations/\",\r\n          {\r\n            senderId: currentId,\r\n            receiverId: user._id\r\n          })\r\n        setCurrentChat(res.data);\r\n      } else {\r\n        setCurrentChat(res.data);\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"chatOnline\">\r\n      {onlineFriends.map((o) => (\r\n        <div className=\"chatOnlineFriend\" onClick={() => handleClick(o)}>\r\n          <div className=\"chatOnlineImgContainer\">\r\n            <img\r\n              className=\"chatOnlineImg\"\r\n              src={\r\n                o?.profilePicture\r\n                  ? o.profilePicture\r\n                  : \"https://i.pinimg.com/736x/d9/56/9b/d9569bbed4393e2ceb1af7ba64fdf86a.jpg\"\r\n              }\r\n              alt=\"\"\r\n            />\r\n            <div className=\"chatOnlineBadge\"></div>\r\n          </div>\r\n          <span className=\"chatOnlineName\">{o?.username}</span>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,aAAT,QAA8B,cAA9B;AACA,OAAO,kBAAP;;AAEA,eAAe,SAASC,UAAT,OAAgE;EAAA;;EAAA,IAA5C;IAAEC,WAAF;IAAeC,SAAf;IAA0BC;EAA1B,CAA4C;EAC7E,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBP,QAAQ,CAAC,EAAD,CAAtC;EACA,MAAM,CAACQ,aAAD,EAAgBC,gBAAhB,IAAoCT,QAAQ,CAAC,EAAD,CAAlD;EAEAD,SAAS,CAAC,MAAM;IACd,MAAMW,UAAU,GAAG,YAAY;MAC7B,MAAMC,GAAG,GAAG,MAAMV,aAAa,CAACW,GAAd,CAAkB,oBAAoBR,SAAtC,CAAlB;MACAG,UAAU,CAACI,GAAG,CAACE,IAAL,CAAV;IACD,CAHD;;IAKAH,UAAU;EACX,CAPQ,EAON,CAACN,SAAD,CAPM,CAAT;EASAL,SAAS,CAAC,MAAM;IACdU,gBAAgB,CAACH,OAAO,CAACQ,MAAR,CAAgBC,CAAD,IAAOZ,WAAW,CAACa,QAAZ,CAAqBD,CAAC,CAACE,GAAvB,CAAtB,CAAD,CAAhB;EACD,CAFQ,EAEN,CAACX,OAAD,EAAUH,WAAV,CAFM,CAAT;EAIAe,OAAO,CAACC,GAAR,CAAYX,aAAZ;;EAEA,MAAMY,WAAW,GAAG,MAAOC,IAAP,IAAgB;IAClC,IAAI;MACF,MAAMV,GAAG,GAAG,MAAMV,aAAa,CAACW,GAAd,CACf,uBAAsBR,SAAU,IAAGiB,IAAI,CAACJ,GAAI,EAD7B,CAAlB;MAGAC,OAAO,CAACC,GAAR,CAAYR,GAAG,CAACE,IAAhB;;MACA,IAAIF,GAAG,CAACE,IAAJ,KAAa,IAAjB,EAAuB;QACrB,MAAMZ,aAAa,CAACqB,IAAd,CAAmB,iBAAnB,EACJ;UACEC,QAAQ,EAAEnB,SADZ;UAEEoB,UAAU,EAAEH,IAAI,CAACJ;QAFnB,CADI,CAAN;QAKAZ,cAAc,CAACM,GAAG,CAACE,IAAL,CAAd;MACD,CAPD,MAOO;QACLR,cAAc,CAACM,GAAG,CAACE,IAAL,CAAd;MACD;IACF,CAfD,CAeE,OAAOY,GAAP,EAAY;MACZP,OAAO,CAACC,GAAR,CAAYM,GAAZ;IACD;EACF,CAnBD;;EAqBA,oBACE;IAAK,SAAS,EAAC,YAAf;IAAA,UACGjB,aAAa,CAACkB,GAAd,CAAmBC,CAAD,iBACjB;MAAK,SAAS,EAAC,kBAAf;MAAkC,OAAO,EAAE,MAAMP,WAAW,CAACO,CAAD,CAA5D;MAAA,wBACE;QAAK,SAAS,EAAC,wBAAf;QAAA,wBACE;UACE,SAAS,EAAC,eADZ;UAEE,GAAG,EACD,CAAAA,CAAC,SAAD,IAAAA,CAAC,WAAD,YAAAA,CAAC,CAAEC,cAAH,IACID,CAAC,CAACC,cADN,GAEI,yEALR;UAOE,GAAG,EAAC;QAPN;UAAA;UAAA;UAAA;QAAA,QADF,eAUE;UAAK,SAAS,EAAC;QAAf;UAAA;UAAA;UAAA;QAAA,QAVF;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAaE;QAAM,SAAS,EAAC,gBAAhB;QAAA,UAAkCD,CAAlC,aAAkCA,CAAlC,uBAAkCA,CAAC,CAAEE;MAArC;QAAA;QAAA;QAAA;MAAA,QAbF;IAAA;MAAA;MAAA;MAAA;IAAA,QADD;EADH;IAAA;IAAA;IAAA;EAAA,QADF;AAqBD;;GA7DuB3B,U;;KAAAA,U"},"metadata":{},"sourceType":"module"}